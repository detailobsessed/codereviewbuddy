#!/bin/sh
# File generated by prek: https://github.com/j178/prek
# ID: 182c10f181da4464a3eec51b83331688
#
# MODIFIED: Chains CommitGuard (commit-msg.legacy) after prek.
# See https://github.com/commitguard/cli/issues/7 for why this is needed.
# To install: cp docs/git-hooks/commit-msg .git/hooks/commit-msg && chmod +x .git/hooks/commit-msg

HERE="$(cd "$(dirname "$0")" && pwd)"
PREK="/opt/homebrew/bin/prek"

# Check if the full path to prek is executable, otherwise fallback to PATH
if [ ! -x "$PREK" ]; then
    PREK="prek"
fi

"$PREK" hook-impl --hook-dir "$HERE" --script-version 4 --hook-type=commit-msg -- "$@"
PREK_RESULT=$?
if [ $PREK_RESULT -ne 0 ]; then
    exit $PREK_RESULT
fi

# Chain: run CommitGuard after prek succeeds
COMMITGUARD_HOOK="$HERE/commit-msg.legacy"
if [ -x "$COMMITGUARD_HOOK" ]; then
    "$COMMITGUARD_HOOK" "$@"
    exit $?
fi
